---

- hosts: all
  # We do not configure the cluster if one node is failing something.
  any_errors_fatal: true
  roles:
    - system
    - cluster
  vars:
    # Mandatory
    cluster_name: lxd-cluster-1
    cluster_expected_nodes: 3
    cluster_compute_nodes: 3

    # Mandatory on two-nodes clusters: anti-splitbran ping resource
    cluster_ping_remote_addr: 8.8.8.8

    # Mandatory: what container technology to use
    hosting_use_lxd: true

    # Optional: quorum
    cluster_no_quorum_policy: stop # stop, freeze, fence, ignore

    # Optional: resource allocation
    cluster_allocation_vcpus_ratio: 0.8
    cluster_allocation_memory_ratio: 0.8

    # Optional: networking
    net_use_openvswitch: true
    net_front_port: front
    net_front_eth_ports: enp0s9
    net_front_bridge: ovs-front
    #net_back_port: bond-back
    #net_admin_port: bond-admin
    #net_cluster_port: enp0s8
    #net_cluster_port: vtnet1

    # monitoring
    monitoring_use_consul: false
