---

- hosts: cluster_group_1
  any_errors_fatal: true
  roles:
    - system
  vars:
    monitoring_use_nrpe: false
    monitoring_use_consul: false

    metrics_use_collectd: false
    metrics_use_telegraf: false

    logs_send_messages: false


- hosts: cluster_group_1
  any_errors_fatal: true
  roles:
    - cluster
  vars:
    # Mandatory
    cluster_name: db-cluster-1
    cluster_expected_nodes: 3
    cluster_compute_nodes: 3

    # Optional: quorum
    cluster_no_quorum_policy: stop # stop, freeze, fence, ignore

    # Optional: resource allocation
    cluster_allocation_vcpus_ratio: 0.8
    cluster_allocation_memory_ratio: 0.8

    # Optional: hypervisor configuration
    hosting_use_libvirt_lxc: true # default is true
    hosting_use_lxd: false # default is false

    # Optional: networking
    net_use_openvswitch: true # default is false

    net_front_port: bond-front
    net_back_port: bond-back
    net_admin_port: bond-admin
    net_cluster_port: bond-cluster

    net_front_vlans: 10,20,30
    net_back_vlans: 100,300
    net_admin_vlans: 1,2
    net_cluster_vlan: 42

    # Optional: configure hawk
    cluster_use_hawk: true # default is false
    cluster_hawk_file_key: /tmp/hawk.key
    cluster_hawk_file_pem: /tmp/hawk.pem

    # Optional: configure STONITH-base device
    cluster_stonith_use_sbd: true # default is false
    cluster_stonith_sbd_lun_1: /dev/mapper/1234
    cluster_stonith_sbd_lun_2: /dev/mapper/4567
    cluster_stonith_sbd_lun_3: /dev/mapper/8901
